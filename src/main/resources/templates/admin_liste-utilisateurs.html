<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
	<!-- Déclarations du head -->
	<meta charset="UTF-8">
	<link rel="icon" href="/img/logo.png">
	<title>UTCadmin - Accueil</title>
	<link rel="stylesheet" href="/css/style.css" />
	
	<!-- Ressources fournies -->
	<link href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
</head>

<body>
	<!-- Bandeau supérieur -->
	<header>
		<div class="entete" id="entete" onmouseenter="afficher_retour_login()" onmouseleave="masquer_retour_login()">
			<img class="entete_image" id="entete_image" src="../img/logo.png"/>
			<p class="entete_titre" id="entete_titre">
				UTC - Utilitaire Textuel pour la Communication
			</p>
		</div>
		<div class="entete_action">
			<div class="entete_action_texte" onclick="changer_panneau()">Mon profil</div>
			<img class="entete_action_image" src="../img/utilisateur.png" onclick="changer_panneau()"/>
		</div>
	</header>

	<!-- Corps de la page -->
	<main id="corps">
		<nav>
			<span class="titre1" style="cursor: pointer;" th:onclick="|window.location.href='liste-utilisateurs/actualisation'|">Liste utilisateurs</span>
			<span class="titre2" style="cursor: pointer;" th:onclick="|window.location.href='liste-conversations/actualisation'|">Liste conversations</span>
		</nav>

		<article>
			<span class="texte">
				Afin de vous offrir tous les outils pour administrer la plateforme Utilitaire Textuel pour la Communication, vous la liste de tous les utilisateurs inscrits jusqu'à présent. Il vous est ainsi possible d'ajouter un utilisateur, d'éditer ses propriétés, de le désactiver temporairement ou de le supprimer sa présence sur la messagerie.
			</span>
			<table id="example" class="table table-striped" style="width:100%">
				<thead>
					<tr>
						<th style="width: 50px;">n°</th>
						<th>Email</th>
						<th>Nom</th>
						<th>Prénom</th>
						<th>Administrateur</th>
						<th>Désactivé</th>
						<th>En ligne</th>
						<th> </th>
					</tr>
				</thead>
				<tbody th:each="tousLesUtilisateurs : ${ tousLesUtilisateurs }">
					<tr class="tab_ligne" th:id="|tab_l${ 1000 + tousLesUtilisateursStat.index }|" th:onmouseenter="|titre_en_vert(${ 1000 + tousLesUtilisateursStat.index })|" th:onmouseleave="|titre_en_vert_fin(${ 1000 + tousLesUtilisateursStat.index })|">
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.id }"></td>
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.login }"></td>
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.nom }"></td>
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.prenom }"></td>
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.admin }"></td>
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.desactive }"></td>
						<td style="border-right: 1px dimgrey solid;" th:text="${ tousLesUtilisateurs.enligne }"></td>
						<td><input class="tab_radio" id="selection" type="radio" name="selection" th:value="${ tousLesUtilisateurs.id }" onclick="activer_boutons_actions()"></td>
					</tr>
				</tbody>
			</table>
			<div class="action_div">
				<img class="action_img" src="/img/ajouter.png" onclick="ajouter_utilisateur()"/>
				<span class="action_span" onclick="ajouter_utilisateur()" style="color: white;">Ajouter un utilisateur</span>
			</div>
			<div class="action_div">
				<img class="action_img" id="action_img_activer" src="/img/play inactif.png" onclick="activer_utilisateur()"/>
				<span class="action_span" id="action_span_activer" onclick="activer_utilisateur()">Autoriser l'utilisateur</span>
			</div>
			<div class="action_div">
				<img class="action_img" id="action_img_desactiver" src="/img/pause inactif.png" onclick="desactiver_utilisateur()"/>
				<span class="action_span" id="action_span_desactiver" onclick="desactiver_utilisateur()">Suspendre l'utilisateur</span>
			</div>
			<div class="action_div">
				<img class="action_img" id="action_img_supprimer" src="/img/logout inactif.png" onclick="supprimer_utilisateur()" />
				<span class="action_span" id="action_span_supprimer" onclick="supprimer_utilisateur()">Supprimer l'utilisateur</span>
			</div>
		</article>
	</main>
	
	<!-- Panneau lattéral -->
	<aside id="panneau">
		<div class="panneau_corps"  th:object="${ utilisateur }">
			<center>
				<img class="panneau_image" src="https://picsum.photos/500"/>
				<br />
				<span class="titre1" th:text="|${utilisateur.prenom} ${utilisateur.nom}|">
				</span>
				<br />
				<span th:text="${utilisateur.login}"></span>
				<br />
				<span th:text="|Inscrit sur ${nbCanauxInscrits} conversations|"></span>
				<br />
				<br />
				<br />
				<span th:if="${ utilisateur.enligne == 1 }">
					<font color="#33cc33">●</font> en ligne
				</span>
				<br />
				<span th:if="${ utilisateur.admin == 1 }">
					<font color="orange">●</font> administrateur
				</span>
			</center>
		</div>
		
		<footer class="panneau_pied">
			<span>
				&lt;/&gt; Développé pour SR03 en P2022 par
				<br />Bastian Cosson, Léo Mullier, Cédric Martinet
			</span>
		</footer>
	</aside>
	
	<!-- Appel du fichier externe JavaScript -->
	<script type="text/javascript" src="/js/script.js"></script>
</body>
</html>
